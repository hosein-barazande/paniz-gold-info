<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’° Ù…Ø§Ø´ÛŒÙ†â€ŒØ­Ø³Ø§Ø¨ Ø·Ù„Ø§ Ùˆ Ø³Ú©Ù‡</title>
<style>
  body {
    font-family: 'Vazir', Tahoma, sans-serif;
    direction: rtl;
    background: linear-gradient(180deg, #fff8e1, #fff);
    color: #333;
    margin: 0;
    padding: 0;
  }
  header {
    background: linear-gradient(90deg, #d4af37, #b8860b);
    color: #fff;
    text-align: center;
    padding: 15px 0;
    font-size: 1.3em;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  .container {
    max-width: 600px;
    margin: auto;
    padding: 15px;
  }
  .price-card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    padding: 15px 20px;
    margin: 15px 0;
    transition: 0.3s;
  }
  .price-card:hover { transform: scale(1.02); }
  .price-item {
    display: flex;
    justify-content: space-between;
    border-bottom: 1px dashed #ddd;
    padding: 6px 0;
  }
  .analysis {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    padding: 15px 20px;
    margin-top: 25px;
  }
  .good { color: #388e3c; font-weight: bold; }
  .bad { color: #d32f2f; font-weight: bold; }
  .neutral { color: #f57c00; font-weight: bold; }
  .refresh-btn {
    display: block;
    width: 100%;
    background: linear-gradient(90deg, #d4af37, #b8860b);
    color: white;
    border: none;
    border-radius: 10px;
    padding: 12px;
    font-size: 1em;
    cursor: pointer;
    transition: 0.3s;
    margin-top: 20px;
  }
  .refresh-btn:hover {
    background: linear-gradient(90deg, #b8860b, #d4af37);
  }
  footer {
    text-align: center;
    color: #999;
    font-size: 0.8em;
    padding: 15px 0 30px;
  }
</style>
</head>
<body>

<header>ğŸ“Š Ù…Ø§Ø´ÛŒÙ†â€ŒØ­Ø³Ø§Ø¨ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø·Ù„Ø§ Ùˆ Ø³Ú©Ù‡</header>

<div class="container">
  <div class="price-card">
    <h3>ğŸ’ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ</h3>
    <div class="price-item"><span>ğŸŸ¡ Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø±:</span> <span id="gold18">â³</span></div>
    <div class="price-item"><span>ğŸŒ Ø·Ù„Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ (Ø§ÙˆÙ†Ø³):</span> <span id="goldWorld">â³</span></div>
    <div class="price-item"><span>ğŸ¥‡ Ø³Ú©Ù‡ Ø§Ù…Ø§Ù…ÛŒ:</span> <span id="sekeEmami">â³</span></div>
    <div class="price-item"><span>ğŸ… Ø³Ú©Ù‡ Ø¨Ù‡Ø§Ø± Ø¢Ø²Ø§Ø¯ÛŒ:</span> <span id="sekeBahar">â³</span></div>
    <div class="price-item"><span>ğŸ¥ˆ Ù†ÛŒÙ… Ø³Ú©Ù‡:</span> <span id="nim">â³</span></div>
    <div class="price-item"><span>ğŸ¥‰ Ø±Ø¨Ø¹ Ø³Ú©Ù‡:</span> <span id="rob">â³</span></div>
  </div>

  <div class="analysis">
    <h3>ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ø§Ù…Ø±ÙˆØ² Ø¨Ø§Ø²Ø§Ø±</h3>
    <p id="goldAnalysis">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª...</p>
    <p id="coinAdvice">ğŸ’¬ Ù…Ù†ØªØ¸Ø± ØªØ­Ù„ÛŒÙ„...</p>
  </div>

  <button class="refresh-btn" onclick="getGoldData()">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø³ØªÛŒ</button>

  <footer>Â© 2025 Ù…Ø§Ø´ÛŒÙ†â€ŒØ­Ø³Ø§Ø¨ Ø·Ù„Ø§ Ùˆ Ø³Ú©Ù‡ | Ø­Ø³ÛŒÙ† Ø¨Ø±Ø§Ø²Ù†Ø¯Ù‡ ğŸ’›</footer>
</div>

<script>
// ğŸŒ Ø¢Ø¯Ø±Ø³ API Ø¨Ø§ Ù¾Ø±Ø§Ú©Ø³ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯ÙˆØ± Ø²Ø¯Ù† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª CORS
const apiUrl = "https://corsproxy.io/?https://api.tgju.org/v1/market/summary";

// ğŸ¯ Ú¯Ø±ÙØªÙ† Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§
const gold18Elem = document.getElementById("gold18");
const goldWorldElem = document.getElementById("goldWorld");
const sekeEmamiElem = document.getElementById("sekeEmami");
const sekeBaharElem = document.getElementById("sekeBahar");
const nimElem = document.getElementById("nim");
const robElem = document.getElementById("rob");
const goldAnalysis = document.getElementById("goldAnalysis");
const coinAdvice = document.getElementById("coinAdvice");

// âš™ï¸ ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
async function getGoldData() {
  try {
    goldAnalysis.textContent = "ğŸ” Ø¯Ø± Ø­Ø§Ù„ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª...";
    const res = await fetch(apiUrl);
    const json = await res.json();
    const data = json.data;

    // ğŸŸ¡ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§
    const gold18 = data["geram18"]["p"];
    const worldGold = data["ons"]["p"];
    const sekeEmami = data["sekeemami"]["p"];
    const sekeBahar = data["sekebahar"]["p"];
    const nim = data["nim"]["p"];
    const rob = data["rob"]["p"];

    // ğŸ’° Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± ØµÙØ­Ù‡
    gold18Elem.textContent = `${gold18} ØªÙˆÙ…Ø§Ù†`;
    goldWorldElem.textContent = `${worldGold} Ø¯Ù„Ø§Ø±`;
    sekeEmamiElem.textContent = `${sekeEmami} ØªÙˆÙ…Ø§Ù†`;
    sekeBaharElem.textContent = `${sekeBahar} ØªÙˆÙ…Ø§Ù†`;
    nimElem.textContent = `${nim} ØªÙˆÙ…Ø§Ù†`;
    robElem.textContent = `${rob} ØªÙˆÙ…Ø§Ù†`;

    // ğŸ“ˆ ØªØ­Ù„ÛŒÙ„ ØµØ±ÙÙ‡ Ø®Ø±ÛŒØ¯ Ø·Ù„Ø§
    const iranPrice = parseFloat(gold18.replace(/,/g, ""));
    const worldPrice = parseFloat(worldGold.replace(/,/g, ""));
    analyzeGold(iranPrice, worldPrice);

    // ğŸ’¹ ØªØ­Ù„ÛŒÙ„ Ø­Ø¨Ø§Ø¨ Ø³Ú©Ù‡
    analyzeCoin(sekeEmami, sekeBahar, nim, rob);

  } catch (err) {
    console.error("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§:", err);
    gold18Elem.textContent = goldWorldElem.textContent = "âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§";
    goldAnalysis.textContent = "ğŸš« Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ù…Ú©Ù† Ù†ÛŒØ³Øª!";
    coinAdvice.textContent = "";
  }
}

// ğŸ“Š ØªØ§Ø¨Ø¹ ØªØ­Ù„ÛŒÙ„ Ø®Ø±ÛŒØ¯ Ø·Ù„Ø§
function analyzeGold(iranPrice, worldPrice) {
  const worldPricePerGramDollar = worldPrice / 31.1035;
  const dollarRate = 60000;
  const worldPricePerGramToman = worldPricePerGramDollar * dollarRate;
  const diff = iranPrice - worldPricePerGramToman;
  const percent = (diff / worldPricePerGramToman) * 100;

  if (percent > 15) {
    goldAnalysis.innerHTML = "ğŸš« Ø®Ø±ÛŒØ¯ Ø·Ù„Ø§ Ø¨Ù‡â€ŒØµØ±ÙÙ‡ Ù†ÛŒØ³Øª (Ø­Ø¨Ø§Ø¨ Ø¨Ø§Ù„Ø§)";
    goldAnalysis.className = "bad";
  } else if (percent > 5) {
    goldAnalysis.innerHTML = "âš ï¸ Ø®Ø±ÛŒØ¯ Ø¨Ø§ Ø§Ø­ØªÛŒØ§Ø· Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯ (Ø¨Ø§Ø²Ø§Ø± Ù†Ø§Ù¾Ø§ÛŒØ¯Ø§Ø±)";
    goldAnalysis.className = "neutral";
  } else {
    goldAnalysis.innerHTML = "âœ… Ø²Ù…Ø§Ù† Ø®ÙˆØ¨ÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø·Ù„Ø§ Ø§Ø³Øª!";
    goldAnalysis.className = "good";
  }
}

// ğŸ’¡ ØªØ­Ù„ÛŒÙ„ Ø³Ø§Ø¯Ù‡ Ø­Ø¨Ø§Ø¨ Ø³Ú©Ù‡â€ŒÙ‡Ø§
function analyzeCoin(emami, bahar, nim, rob) {
  const coins = [
    { name: "Ø³Ú©Ù‡ Ø§Ù…Ø§Ù…ÛŒ", value: parseFloat(emami.replace(/,/g, "")) },
    { name: "Ø³Ú©Ù‡ Ø¨Ù‡Ø§Ø± Ø¢Ø²Ø§Ø¯ÛŒ", value: parseFloat(bahar.replace(/,/g, "")) },
    { name: "Ù†ÛŒÙ… Ø³Ú©Ù‡", value: parseFloat(nim.replace(/,/g, "")) },
    { name: "Ø±Ø¨Ø¹ Ø³Ú©Ù‡", value: parseFloat(rob.replace(/,/g, "")) },
  ];

  // Ú©Ù…ØªØ±ÛŒÙ† Ø§Ø®ØªÙ„Ø§Ù = Ø¨Ù‡ØªØ±ÛŒÙ† Ø®Ø±ÛŒØ¯
  const best = coins.reduce((a, b) => (a.value < b.value ? a : b));
  coinAdvice.innerHTML = `ğŸ’° Ø¨Ù‡ØªØ±ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ Ø§Ù…Ø±ÙˆØ²: <b>${best.name}</b> Ø§Ø³Øª.`;
}

// ğŸš€ Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ + Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± Û² Ø¯Ù‚ÛŒÙ‚Ù‡
getGoldData();
setInterval(getGoldData, 120000);
</script>

</body>
</html>
