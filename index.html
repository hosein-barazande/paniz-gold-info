<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø§Ø´ÛŒÙ†â€ŒØ­Ø³Ø§Ø¨ Ø·Ù„Ø§ Ùˆ Ø³Ú©Ù‡</title>
<style>
  body {
    font-family: 'Vazir', Tahoma, sans-serif;
    direction: rtl;
    background: linear-gradient(180deg, #fff8e1, #fff);
    color: #333;
    margin: 0;
    padding: 0;
  }
  header {
    background: linear-gradient(90deg, #d4af37, #b8860b);
    color: #fff;
    text-align: center;
    padding: 15px 0;
    font-size: 1.3em;
    font-weight: bold;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  .container {
    max-width: 600px;
    margin: auto;
    padding: 15px;
  }
  .price-card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    padding: 15px 20px;
    margin: 15px 0;
    transition: 0.3s;
  }
  .price-card:hover { transform: scale(1.02); }
  .price-item {
    display: flex;
    justify-content: space-between;
    border-bottom: 1px dashed #ddd;
    padding: 6px 0;
  }
  .analysis {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    padding: 15px 20px;
    margin-top: 25px;
  }
  .good { color: #388e3c; font-weight: bold; }
  .bad { color: #d32f2f; font-weight: bold; }
  .neutral { color: #f57c00; font-weight: bold; }
  .refresh-btn {
    display: block;
    width: 100%;
    background: linear-gradient(90deg, #d4af37, #b8860b);
    color: white;
    border: none;
    border-radius: 10px;
    padding: 12px;
    font-size: 1em;
    cursor: pointer;
    transition: 0.3s;
    margin-top: 20px;
  }
  .refresh-btn:hover {
    background: linear-gradient(90deg, #b8860b, #d4af37);
  }
  footer {
    text-align: center;
    color: #999;
    font-size: 0.8em;
    padding: 15px 0 30px;
  }
</style>
</head>
<body>

<header>ğŸ“Š Ù…Ø§Ø´ÛŒÙ†â€ŒØ­Ø³Ø§Ø¨ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø·Ù„Ø§ Ùˆ Ø³Ú©Ù‡</header>

<div class="container">
  <div class="price-card">
    <h3>Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ</h3>
    <div class="price-item"><span>Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø±:</span> <span id="gold18">...</span></div>
    <div class="price-item"><span>Ø·Ù„Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ (Ø§ÙˆÙ†Ø³):</span> <span id="goldWorld">...</span></div>
    <div class="price-item"><span>Ø³Ú©Ù‡ Ø§Ù…Ø§Ù…ÛŒ:</span> <span id="sekeb">...</span></div>
    <div class="price-item"><span>Ø³Ú©Ù‡ Ø¨Ù‡Ø§Ø± Ø¢Ø²Ø§Ø¯ÛŒ:</span> <span id="bahar">...</span></div>
    <div class="price-item"><span>Ù†ÛŒÙ… Ø³Ú©Ù‡:</span> <span id="nim">...</span></div>
    <div class="price-item"><span>Ø±Ø¨Ø¹ Ø³Ú©Ù‡:</span> <span id="rob">...</span></div>
  </div>

  <div class="analysis">
    <h3>ØªØ­Ù„ÛŒÙ„ Ø§Ù…Ø±ÙˆØ²</h3>
    <p id="goldAnalysis">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª...</p>
    <p id="coinAdvice"></p>
  </div>

  <button class="refresh-btn" onclick="getGoldData()">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø³ØªÛŒ</button>

  <footer>Â© 2025 Ù…Ø§Ø´ÛŒÙ†â€ŒØ­Ø³Ø§Ø¨ Ø·Ù„Ø§ Ùˆ Ø³Ú©Ù‡ | Ø­Ø³ÛŒÙ† Ø¨Ø±Ø§Ø²Ù†Ø¯Ù‡</footer>
</div>

<script>
async function getGoldData() {
  try {
    const url = 'https://api.allorigins.win/get?url=' + encodeURIComponent('https://api.tgju.org/v1/market/summary');
    const res = await fetch(url);
    const proxyData = await res.json();
    const data = JSON.parse(proxyData.contents);

    const gold18 = Number(data['gold_18']['p']);
    const goldWorld = Number(data['ons']['p']);
    const sekeb = Number(data['sekeb']['p']);
    const bahar = Number(data['bahar']['p']);
    const nim = Number(data['nim']['p']);
    const rob = Number(data['rob']['p']);

    document.getElementById('gold18').textContent = gold18.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
    document.getElementById('goldWorld').textContent = goldWorld.toLocaleString() + ' Ø¯Ù„Ø§Ø±';
    document.getElementById('sekeb').textContent = sekeb.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
    document.getElementById('bahar').textContent = bahar.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
    document.getElementById('nim').textContent = nim.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
    document.getElementById('rob').textContent = rob.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';

    analyzeGold(gold18, goldWorld);
    analyzeCoins(sekeb, bahar, nim, rob);

  } catch (err) {
    document.getElementById('goldAnalysis').textContent = 'âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§.';
    console.error(err);
  }
}

function analyzeGold(gold18, goldWorld) {
  const ratio = gold18 / (goldWorld * 60);
  const text = document.getElementById('goldAnalysis');

  if (ratio < 950) {
    text.innerHTML = 'ğŸ’° <span class="good">Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ± Ø§Ø² Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ø³Øª â€” Ø²Ù…Ø§Ù† Ø®ÙˆØ¨ÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø§Ø³Øª.</span>';
  } else if (ratio <= 1050) {
    text.innerHTML = 'âš–ï¸ <span class="neutral">Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ ØªØ¹Ø§Ø¯Ù„ Ø§Ø³Øª. Ø®Ø±ÛŒØ¯ Ø¨Ø§ Ø§Ø­ØªÛŒØ§Ø· Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯.</span>';
  } else {
    text.innerHTML = 'ğŸš« <span class="bad">Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ Ø¨Ø§Ù„Ø§Ø³Øª â€” Ø®Ø±ÛŒØ¯ ØªÙˆØµÛŒÙ‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.</span>';
  }
}

function analyzeCoins(sekeb, bahar, nim, rob) {
  const gold18 = Number(document.getElementById('gold18').textContent.replace(/[^\d]/g, ''));
  const intrinsic = gold18 * 8.13;
  const bubble = sekeb - intrinsic;
  const text = document.getElementById('coinAdvice');

  if (bubble < 0) {
    text.innerHTML = 'ğŸŸ¢ <span class="good">Ø­Ø¨Ø§Ø¨ Ø³Ú©Ù‡ Ù…Ù†ÙÛŒ Ø§Ø³Øª. Ø³Ú©Ù‡ Ø§Ù…Ø§Ù…ÛŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø§Ø³Øª.</span>';
  } else if (bubble < 500000) {
    text.innerHTML = 'ğŸŸ¡ <span class="neutral">Ø­Ø¨Ø§Ø¨ Ú©Ù… Ø§Ø³Øª. Ù†ÛŒÙ…â€ŒØ³Ú©Ù‡ ÛŒØ§ Ø±Ø¨Ø¹â€ŒØ³Ú©Ù‡ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø·Ù‚ÛŒâ€ŒØªØ±ÛŒ Ù‡Ø³ØªÙ†Ø¯.</span>';
  } else {
    text.innerHTML = 'ğŸ”´ <span class="bad">Ø­Ø¨Ø§Ø¨ Ø¨Ø§Ù„Ø§ Ø§Ø³Øª. Ø§Ù…Ø±ÙˆØ² Ø³Ú©Ù‡ Ù†Ø®Ø±ÛŒØ¯.</span>';
  }
}

getGoldData();
setInterval(getGoldData, 300000);
</script>

</body>
</html>
